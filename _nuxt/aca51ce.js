(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{549:function(e,t,n){"use strict";n.r(t);var o,r=n(546),l=n(545),c=(n(42),n(280),n(14),n(57),n(4),n(13),n(41),n(45),n(282),n(205),n(536));function d(){var e=c.e.make;(o=new c.d("myDiagramDiv",{allowCopy:!1,allowDelete:!1,maxSelectionCount:1,validCycle:c.d.CycleDestinationTree,"clickCreatingTool.archetypeNodeData":{name:"Grid",pic:"icon_op01.png",category:"FirstNode"},"clickCreatingTool.insertPart":function(e){var t=c.c.prototype.insertPart.call(this,e);return null!==t&&(this.diagram.select(t),this.diagram.commandHandler.scrollToPart(t),this.diagram.commandHandler.editTextBlock(t.findObject("NAMETB"))),t},layout:e(c.r,{treeStyle:c.r.StyleLastParents,alignment:c.r.AlignmentStart,arrangement:c.r.ArrangementHorizontal,angle:0,layerSpacing:35,alternateAngle:90,alternateLayerSpacing:35,alternateAlignment:c.r.AlignmentBus,alternateNodeSpacing:20}),"undoManager.isEnabled":!0})).animationManager.isEnabled=!1,o.addDiagramListener("Modified",(function(e){var button=document.getElementById("SaveButton");button&&(button.disabled=!o.isModified);var t=document.title.indexOf("*");o.isModified?t<0&&(document.title+="*"):t>=0&&(document.title=document.title.slice(0,t))}));var t=["#666"];function n(e,t){return e instanceof c.i&&(e!==t&&!t.isInTreeOf(e))}function r(e){return e?"image/"+e:"image/img1.png"}function l(e){if(e){var t=e.data;o.startTransaction("add inverter");var n={name:"Inverter",comments:"Text Here",parent:t.key,status:"success"};o.model.addNodeData(n);var r=o.findNodeForData(n);r&&(r.location=e.location),o.commitTransaction("add employee"),o.commandHandler.scrollToPart(r)}}if(o.layout.commitNodes=function(){c.r.prototype.commitNodes.call(this),o.layout.network.vertexes.each((function(n){if(n.node){var o=n.level%t.length,r=t[o],l=n.node.findObject("SHAPE");l&&(l.stroke=e(c.b,"Linear",{0:r,1:c.b.lightenBy(r,.05),start:c.p.Left,end:c.p.Right}))}}))},o.nodeTemplateMap.add("FirstNode",e(c.i,"Auto",{mouseEnter:function(e,t){return t.findObject("BUTTON").opacity=t.findObject("BUTTONX").opacity=1},mouseLeave:function(e,t){return t.findObject("BUTTON").opacity=t.findObject("BUTTONX").opacity=0}},e(c.j,"Auto",e(c.j,"Vertical",e(c.j,"Table",{minSize:new c.o(50,NaN),maxSize:new c.o(60,NaN),margin:new c.g(6,10,0,6),defaultAlignment:c.p.Left},e(c.m,{column:2,width:4}),e(c.q,{font:"9pt  Segoe UI,sans-serif",stroke:"#eee"},{name:"NAMETB",row:0,column:0,columnSpan:5,font:"12pt Segoe UI,sans-serif",editable:!0,isMultiline:!1,minSize:new c.o(50,16)},new c.a("text","name").makeTwoWay())),e(c.k,{name:"Picture",desiredSize:new c.o(50,50),margin:1,source:"image/icon_op01.png"},new c.a("source","pic",r)))),e("Button",e(c.n,"PlusLine",{width:10,height:10}),{name:"BUTTON",alignment:c.p.Right,opacity:0,click:function(e,button){return l(button.part)}},new c.a("opacity","isSelected",(function(s){return s?1:0})).ofObject()),new c.a("isTreeExpanded").makeTwoWay(),e("TreeExpanderButton",{name:"BUTTONX",alignment:c.p.BottomRight,opacity:0,_treeExpandedFigure:"TriangleUp",_treeCollapsedFigure:"TriangleDown"},new c.a("opacity","isSelected",(function(s){return s?1:0})).ofObject()))),o.nodeTemplate=e(c.i,"Spot",{selectionObjectName:"BODY",mouseEnter:function(e,t){return t.findObject("BUTTON").opacity=t.findObject("BUTTONX").opacity=1},mouseLeave:function(e,t){return t.findObject("BUTTON").opacity=t.findObject("BUTTONX").opacity=0},mouseDragEnter:function(e,t,o){if(n(t.diagram.selection.first(),t)){var r=t.findObject("SHAPE");r&&(r._prevFill=r.fill,r.fill="darkred")}},mouseDragLeave:function(e,t,n){var o=t.findObject("SHAPE");o&&o._prevFill&&(o.fill=o._prevFill)},mouseDrop:function(e,t){var o=t.diagram,r=o.selection.first();if(n(r,t)){var link=r.findTreeParentLink();null!==link?link.fromNode=t:o.toolManager.linkingTool.insertLink(t,t.port,r,r.port)}}},new c.a("text","name"),new c.a("layerName","isSelected",(function(e){return e?"Foreground":""})).ofObject(),e(c.j,"Auto",{name:"BODY"},e(c.j,"Vertical",e(c.j,"Table",{minSize:new c.o(150,NaN),maxSize:new c.o(150,NaN),defaultAlignment:c.p.Left},e(c.m,{column:2,width:4}),e(c.n,"Circle",{width:16,height:16},new c.a("fill","status",(function(e){return"success"===e?"green":"pending"===e?"orange":"failed"===e?"red":void 0}))),e(c.q,{font:"9pt  Segoe UI,sans-serif",stroke:"#eee"},{name:"NAMETB",row:0,column:0,columnSpan:5,font:"12pt Segoe UI,sans-serif",editable:!0,isMultiline:!1,margin:new c.g(0,0,0,24)},new c.a("text","name").makeTwoWay())),e(c.k,{name:"Picture",desiredSize:new c.o(50,50),margin:1,source:"image/icon_op05.png"},new c.a("source","pic",r)),e(c.j,"Auto",{defaultAlignment:c.p.Left},e(c.n,"Rectangle",{parameter1:10,fill:"white",stroke:"#666",strokeWidth:1}),e(c.q,{font:"9pt  Segoe UI,sans-serif",stroke:"#eee"},{row:1,column:1,wrap:c.q.WrapFit,editable:!0,font:"9pt  Segoe UI,sans-serif",stroke:"#000",textAlign:"right",margin:new c.g(6,10,6,10)},new c.a("text","comments").makeTwoWay())))),e("Button",e(c.n,"PlusLine",{width:10,height:10}),{name:"BUTTON",alignment:c.p.Right,opacity:0,click:function(e,button){return l(button.part)}},new c.a("opacity","isSelected",(function(s){return s?1:0})).ofObject()),new c.a("isTreeExpanded").makeTwoWay(),e("TreeExpanderButton",{name:"BUTTONX",alignment:c.p.Bottom,opacity:0,_treeExpandedFigure:"TriangleUp",_treeCollapsedFigure:"TriangleDown"},new c.a("opacity","isSelected",(function(s){return s?1:0})).ofObject())),o.nodeTemplate.contextMenu=e("ContextMenu",e("ContextMenuButton",e(c.q,"Add Employee"),{click:function(e,button){return l(button.part.adornedPart)}}),e("ContextMenuButton",e(c.q,"Vacate Position"),{click:function(e,button){var t=button.part.adornedPart;if(null!==t){var n=t.data;o.startTransaction("vacate"),o.model.setDataProperty(n,"name","(Vacant)"),o.model.setDataProperty(n,"pic",""),o.model.setDataProperty(n,"comments",""),o.commitTransaction("vacate")}}}),e("ContextMenuButton",e(c.q,"Remove Role"),{click:function(e,button){var t=button.part.adornedPart;if(null!==t){o.startTransaction("reparent remove");for(var n=t.findTreeChildrenNodes();n.next();){var r=n.value;o.model.setParentKeyForNodeData(r.data,t.findTreeParentNode().data.key)}o.model.removeNodeData(t.data),o.commitTransaction("reparent remove")}}}),e("ContextMenuButton",e(c.q,"Remove Department"),{click:function(e,button){var t=button.part.adornedPart;null!==t&&(o.startTransaction("remove dept"),o.removeParts(t.findTreeParts()),o.commitTransaction("remove dept"))}})),o.linkTemplate=e(c.f,c.f.Orthogonal,{layerName:"Background",corner:0},e(c.n,{strokeWidth:1.5,stroke:"#eee"})),m(),window.Inspector)new Inspector("myInspector",o,{properties:{}})}function m(){var data={class:"go.TreeModel",nodeDataArray:[]};if(void 0===localStorage.getItem("list")||null===localStorage.getItem("list")){localStorage.setItem("list",JSON.stringify([{key:-1,name:"Grid",pic:"icon_op01.png",category:"FirstNode"},{name:"Inverter1",pic:"icon_op05.png",parent:-1,status:"success",comments:"Dc Voltage E 0 0 v\nDc Current 1.8 A\nDC Power 0 0 kw\nTotal Actice Power 0 0 kw\nTotal Active Energy 721,039.2kwh"},{name:"Inverter2",pic:"icon_op05.png",parent:-1,status:"pending",comments:"Dc Voltage E 0 0 v\nDc Current 1.8 A\nDC Power 0 0 kw\nTotal Actice Power 0 0 kw\nTotal Active Energy 721,039.2kwh"},{name:"Inverter2",pic:"icon_op05.png",parent:-1,status:"failed",comments:"Dc Voltage E 0 0 v\nDc Current 1.8 A\nDC Power 0 0 kw\nTotal Actice Power 0 0 kw\nTotal Active Energy 721,039.2kwh"}]))}var e=localStorage.getItem("list");if(data.nodeDataArray=JSON.parse(e),o.model=c.h.fromJson(data),o.scale=parseFloat(localStorage.getItem("zoom"))||1,void 0===localStorage.getItem("nodePosition")||null===localStorage.getItem("nodePosition")){localStorage.setItem("nodePosition",JSON.stringify([{key:0,x:0,y:0}]))}var t=JSON.parse(localStorage.getItem("nodePosition")),n=0,r=setInterval((function(){n>=1?t.forEach((function(e){var t=o.findNodeForKey(e.key);t&&(t.location=new c.l(e.x,e.y)),clearInterval(r)})):n++}),5),l=JSON.parse(localStorage.getItem("position"))||{x:0,y:0},d=0,m=setInterval((function(){d>=1?(o.position=new c.l(l.x,l.y),clearInterval(m)):d++}),1)}var f={name:"IndexPage",mounted:function(){d(),this.registerModelChangedListener()},methods:{load:function(){m()},save:function(){var e=o.scale,t=o.position,n=[];o.nodes.each((function(e){var data=e.data,t=e.location;n.push({key:data.key,x:t.x,y:t.y})})),localStorage.setItem("zoom",e),localStorage.setItem("position",JSON.stringify(t)),localStorage.setItem("list",JSON.stringify(o.model.Tc)),localStorage.setItem("nodePosition",JSON.stringify(n))},makeSvg:function(){var svg=o.makeImage({scale:1,background:"white"}),e=(new XMLSerializer).serializeToString(svg);!function(e){var t=window.URL.createObjectURL(e),n="mySVGFile.svg",a=document.createElement("a");a.style="display: none",a.href=t,a.download=n,void 0===window.navigator.msSaveBlob?(document.body.appendChild(a),requestAnimationFrame((function(){a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}))):window.navigator.msSaveBlob(e,n)}(new Blob([e],{type:"image/jpg"}))},registerModelChangedListener:function(){var e=this;o.addModelChangedListener((function(t){if(t.isTransactionFinished){var n=t.object;console.log("asdasd",t,n),null!==n&&"TextEditing"===n.xa&&e.save()}}))},reset:function(){localStorage.removeItem("zoom"),localStorage.removeItem("position"),localStorage.removeItem("list"),localStorage.removeItem("nodePosition"),location.reload()}}},v=n(7),component=Object(v.a)(f,(function(){var e=this,t=e._self._c;return t(l.a,{attrs:{justify:"center",align:"center"}},[t(r.a,{attrs:{cols:"12"}},[t("button",{staticStyle:{border:"1px solid #000",color:"#000"},attrs:{type:"button"},on:{click:e.save}},[e._v("세이브")]),e._v(" "),t("button",{staticStyle:{border:"1px solid #000",color:"#000"},attrs:{type:"button"},on:{click:e.load}},[e._v("로드")]),e._v(" "),t("button",{staticStyle:{border:"1px solid #000",color:"#000"},attrs:{type:"button"},on:{click:e.makeSvg}},[e._v("svg 저장")]),e._v(" "),t("button",{staticStyle:{border:"1px solid #000",color:"#000"},attrs:{type:"button"},on:{click:e.reset}},[e._v("초기화")]),e._v(" "),t("div",{staticStyle:{width:"100%",height:"700px",background:"#212224",border:"1px solid #ddd"},attrs:{id:"myDiagramDiv"}})])],1)}),[],!1,null,null,null);t.default=component.exports}}]);